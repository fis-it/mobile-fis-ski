<!DOCTYPE html>
<html>
	<head>
		<title>m.fis-ski.com</title>
		<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <script src="phonegap.js"></script>
        <script>
            document.addEventListener("deviceready", onDeviceReady, false);
                        function fct_exitapp()
            {
                if (navigator.app) {
                    navigator.app.exitApp();
                } else if (navigator.device) {
                    navigator.device.exitApp();
                }
            }
            function fct_clearcache()
            {
                if (navigator.app) {
                    navigator.app.clearCache();
                } else if (navigator.device) {
                    navigator.device.clearCache();
                }
            }
            function onDeviceReady() {
                //document.addEventListener("backbutton", onBackbuttonPress, false);
                //checkConnection();
                debuglog();
                alert("document.close()");
                document.close();
                alert("window.close()");
                window.close();
            }
            function printObject(o) {
                var out = '';
                for (var p in o) {
                  out += '<strong>'+ p + '</strong>: ' + o[p] + "\r\n<br/>";
                }
                document.write(out);
            }
            function debuglog()
            {
                document.write("<h2>History.length</h2>"+history.length);
                document.write("<h2>Object Navigator</h2>");
                printObject(navigator);
                document.write("<h2>Object Navigator.device</h2>");
                printObject(navigator.device);
                document.write("<h2>Object Navigator.device.capture</h2>");
                printObject(navigator.device.capture);
                document.write("<h2>Object history</h2>");
                printObject(history);
                document.write("<h2>Object document</h2>");
                printObject(document);
                //document.write("<h2>Object window</h2>");
                //printObject(window);
            }
            
            function checkConnection() {
                //var networkState = navigator.network.connection.type;
                var networkState = navigator.onLine;
                if (networkState != true){
                    alert('Mobile.fis-ski.com need a internet connection, please activate the internet and try again.')
                    fct_exitapp();
                } else {
                    if (history.length > 1){
                        if (confirm("Are you sure do you want quit mobile.fisski.com?")){
                            fct_exitapp();
                        } else {
                            //fct_clearcache();
                            top.document.location = 'http://m.fisski.com';
                        }
                    } else {
                        //fct_clearcache();
                        top.document.location = 'http://m.fisski.com';
                    }
                }
            }
        </script>
	</head>
	<body>
        <p align="center">Loading ...</p>
	</body>
</html>
